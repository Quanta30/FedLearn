{"version":3,"file":"main.js","sources":["../electron/main.ts"],"sourcesContent":["import { app, BrowserWindow, ipcMain } from 'electron'\r\nimport { createRequire } from 'node:module'\r\nimport { fileURLToPath } from 'node:url'\r\nimport path from 'node:path'\r\n\r\nconst require = createRequire(import.meta.url)\r\nconst __dirname = path.dirname(fileURLToPath(import.meta.url))\r\n\r\n// Add IPC handlers here, before creating the window\r\nipcMain.handle('get-env', (event, name) => {\r\n  return process.env[name];\r\n});\r\n\r\n// Show message handler (optional, for native dialogs)\r\nipcMain.on('show-message', (event, message) => {\r\n  if (win) {\r\n    const { dialog } = require('electron');\r\n    dialog.showMessageBox(win, {\r\n      type: 'info',\r\n      message: message\r\n    });\r\n  }\r\n});\r\n\r\n\r\n\r\n// The built directory structure\r\n//\r\n// â”œâ”€â”¬â”€â”¬ dist\r\n// â”‚ â”‚ â””â”€â”€ index.html\r\n// â”‚ â”‚\r\n// â”‚ â”œâ”€â”¬ dist-electron\r\n// â”‚ â”‚ â”œâ”€â”€ main.js\r\n// â”‚ â”‚ â””â”€â”€ preload.mjs\r\n// â”‚\r\nprocess.env.APP_ROOT = path.join(__dirname, '..')\r\n\r\n// ðŸš§ Use ['ENV_NAME'] avoid vite:define plugin - Vite@2.x\r\nexport const VITE_DEV_SERVER_URL = process.env['VITE_DEV_SERVER_URL']\r\nexport const MAIN_DIST = path.join(process.env.APP_ROOT, 'dist-electron')\r\nexport const RENDERER_DIST = path.join(process.env.APP_ROOT, 'dist')\r\nprocess.env.VITE_PUBLIC = VITE_DEV_SERVER_URL \r\n  ? path.join(process.env.APP_ROOT, 'public') \r\n  : RENDERER_DIST\r\n\r\nlet win: BrowserWindow | null\r\n\r\nfunction createWindow() {\r\n  win = new BrowserWindow({\r\n    icon: path.join(process.env.VITE_PUBLIC, 'electron-vite.svg'),\r\n    webPreferences: {\r\n      preload: path.join(__dirname, 'preload.mjs'),\r\n      nodeIntegration: false,       // Enable Node.js integration\r\n      contextIsolation: true,     // Disable context isolation\r\n      enableRemoteModule: false, // Disable remote module\r\n\r\n    },\r\n  })\r\n\r\n  // Test active push message to Renderer-process.\r\n  win.webContents.on('did-finish-load', () => {\r\n    win?.webContents.send('main-process-message', (new Date).toLocaleString())\r\n  })\r\n\r\n  win.setMenuBarVisibility(false) // Hide the menu bar\r\n\r\n  if (VITE_DEV_SERVER_URL) {\r\n    win.loadURL(VITE_DEV_SERVER_URL)\r\n    win.webContents.openDevTools(); // Open DevTools in development mode\r\n  } else {\r\n    // win.loadFile('dist/index.html')\r\n    win.loadFile(path.join(RENDERER_DIST, 'index.html'))\r\n  }\r\n}\r\n\r\n\r\n// Quit when all windows are closed, except on macOS. There, it's common\r\n// for applications and their menu bar to stay active until the user quits\r\n// explicitly with Cmd + Q.\r\napp.on('window-all-closed', () => {\r\n  if (process.platform !== 'darwin') {\r\n    app.quit()\r\n    win = null\r\n  }\r\n})\r\n\r\napp.on('activate', () => {\r\n  // On OS X it's common to re-create a window in the app when the\r\n  // dock icon is clicked and there are no other windows open.\r\n  if (BrowserWindow.getAllWindows().length === 0) {\r\n    createWindow()\r\n  }\r\n})\r\n\r\napp.whenReady().then(createWindow)"],"names":["require"],"mappings":";;;;AAKA,MAAMA,WAAU,cAAc,YAAY,GAAG;AAC7C,MAAM,YAAY,KAAK,QAAQ,cAAc,YAAY,GAAG,CAAC;AAG7D,QAAQ,OAAO,WAAW,CAAC,OAAO,SAAS;AAClC,SAAA,YAAY,IAAI;AACzB,CAAC;AAGD,QAAQ,GAAG,gBAAgB,CAAC,OAAO,YAAY;AAC7C,MAAI,KAAK;AACP,UAAM,EAAE,OAAA,IAAWA,SAAQ,UAAU;AACrC,WAAO,eAAe,KAAK;AAAA,MACzB,MAAM;AAAA,MACN;AAAA,IAAA,CACD;AAAA,EAAA;AAEL,CAAC;AAaD,QAAA,IAAY,WAAW,KAAK,KAAK,WAAW,IAAI;AAGnC,MAAA,sBAAsB,YAAY,qBAAqB;AAC7D,MAAM,YAAY,KAAK,KAAK,QAAA,IAAY,UAAU,eAAe;AACjE,MAAM,gBAAgB,KAAK,KAAK,QAAA,IAAY,UAAU,MAAM;AACnE,QAAA,IAAY,cAAc,sBACtB,KAAK,KAAK,QAAY,IAAA,UAAU,QAAQ,IACxC;AAEJ,IAAI;AAEJ,SAAS,eAAe;AACtB,QAAM,IAAI,cAAc;AAAA,IACtB,MAAM,KAAK,KAAK,QAAA,IAAY,aAAa,mBAAmB;AAAA,IAC5D,gBAAgB;AAAA,MACd,SAAS,KAAK,KAAK,WAAW,aAAa;AAAA,MAC3C,iBAAiB;AAAA;AAAA,MACjB,kBAAkB;AAAA;AAAA,MAClB,oBAAoB;AAAA;AAAA,IAAA;AAAA,EAEtB,CACD;AAGG,MAAA,YAAY,GAAG,mBAAmB,MAAM;AAC1C,+BAAK,YAAY,KAAK,6CAA6B,KAAA,GAAM;EAAgB,CAC1E;AAED,MAAI,qBAAqB,KAAK;AAE9B,MAAI,qBAAqB;AACvB,QAAI,QAAQ,mBAAmB;AAC/B,QAAI,YAAY,aAAa;AAAA,EAAA,OACxB;AAEL,QAAI,SAAS,KAAK,KAAK,eAAe,YAAY,CAAC;AAAA,EAAA;AAEvD;AAMA,IAAI,GAAG,qBAAqB,MAAM;AAC5B,MAAA,QAAQ,aAAa,UAAU;AACjC,QAAI,KAAK;AACH,UAAA;AAAA,EAAA;AAEV,CAAC;AAED,IAAI,GAAG,YAAY,MAAM;AAGvB,MAAI,cAAc,gBAAgB,WAAW,GAAG;AACjC,iBAAA;AAAA,EAAA;AAEjB,CAAC;AAED,IAAI,UAAA,EAAY,KAAK,YAAY;"}